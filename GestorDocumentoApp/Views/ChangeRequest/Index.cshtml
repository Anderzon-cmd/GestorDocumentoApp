@using GestorDocumentoApp.Utils
@model ChangeRequestIndexVM

@{
    ViewData["Title"] = "Changes Page";
}

@await Html.PartialAsync("_HeaderTitle", new HeaderTitle { Title = "Cambios", Subtitle = "Listado de cambios solicitados" })


<div class="my-2 flex items-end justify-between">
    <form asp-action="Index" method="get" class="flex items-end gap-2">
        <div>
            <label for="countries" class="mb-2 block text-sm font-medium text-gray-900">Seleccione una opcion</label>

            <select asp-for="@Model.ElementId" asp-items="Model.Elements" class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-600 focus:ring-blue-600">
                <option value="">-- Seleccione el tipo de elemento</option>
            </select>
        </div>

        <button type="submit"
        class="max-h-fit max-w-fit rounded-lg bg-blue-700 px-5 py-2 text-center text-sm font-medium text-white focus:ring-4 focus:ring-blue-300 focus:outline-none sm:w-auto">
            Filtrar
        </button>

    </form>

    <a asp-action="Create" class="max-h-fit rounded-lg bg-blue-700 px-10 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-blue-800 sm:w-auto">
        Crear
    </a>
</div>

<table class="min-w-full">

    <thead class="border-b border-gray-100 bg-gray-200">
        <tr>
            <th scope="col"
            class="px-6 py-4 text-left text-sm font-medium text-gray-900">
                Id
            </th>
            <th scope="col"
            class="px-6 py-4 text-left text-sm font-medium text-gray-900">
                Codigo
            </th>

            <th scope="col"
            class="px-6 py-4 text-left text-sm font-medium text-gray-900">
                Clasificacion
            </th>

            <th scope="col"
            class="px-6 py-4 text-left text-sm font-medium text-gray-900">
                Priodidad
            </th>

            <th scope="col"
            class="px-6 py-4 text-left text-sm font-medium text-gray-900">
                Proceso
            </th>

            <th scope="col"
            class="px-6 py-4 text-left text-sm font-medium text-gray-900">
                Estado
            </th>

            <th scope="col"
            class="px-6 py-4 text-left text-sm font-medium text-gray-900">
                Descripcion
            </th>

            <th scope="col"
            class="px-6 py-4 text-left text-sm font-medium text-gray-900">
                Acciones
            </th>

        </tr>
    </thead>
    <tbody>

        @foreach (var item in Model.Items)
        {
            <tr class="border-b border-gray-100 bg-white transition duration-300 ease-in-out hover:bg-gray-100">

                <td class="px-6 py-4 text-sm font-medium whitespace-nowrap text-gray-900">
                    @item.Id
                </td>

                <td class="px-6 py-4 text-sm whitespace-nowrap text-gray-900">
                    @item.Code
                </td>

                <td class="px-6 py-4 text-sm whitespace-nowrap text-gray-900">
                    @item.Clasification
                </td>

                <td class="px-6 py-4 text-sm whitespace-nowrap text-gray-900">
                    @item.Priority
                </td>

                <td class="px-6 py-4 text-sm whitespace-nowrap text-gray-900">
                    @if (item.Status == StatusCR.Baselined)
                    {
                        <span class="rounded bg-green-300 px-2.5 py-0.5">@item.Status.GetDisplayNames()</span>
                    }
                    else
                    {
                        <span class="rounded bg-yellow-300 px-2.5 py-0.5">@item.Status.GetDisplayNames()</span>
                    }

                </td>

                <td class="px-6 py-4 text-sm whitespace-nowrap text-gray-900">
                    @if (item.Action ==ActionCR.Approved)
                    {
                        <span class="rounded bg-green-300 px-2.5 py-0.5">@item.Action.GetDisplayNames()</span>
                    }
                    else
                    {
                        <span class="rounded bg-yellow-300 px-2.5 py-0.5">@item.Action.GetDisplayNames()</span>
                    }
                </td>

                <td class="px-6 py-4 text-sm whitespace-nowrap text-gray-900">
                    @item.Description
                </td>

                <td class="flex items-center gap-3 px-6 py-4">

                    <a asp-action="Edit" asp-route-id="@item.Id"
                       class="text-blue-600 hover:text-blue-800 dark:text-blue-500 dark:hover:text-blue-400">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                             stroke-width="1.5" stroke="currentColor" class="inline h-5 w-5">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                  d="M16.862 4.487l1.687 1.687a1.5 1.5 0 010 2.121l-9.193 9.193a4.5 4.5 0 01-1.591.99l-3.41 1.137a.75.75 0 01-.948-.948l1.137-3.41a4.5 4.5 0 01.99-1.591l9.193-9.193a1.5 1.5 0 012.121 0z" />
                        </svg>
                    </a>


                    <form asp-action="Delete" method="post"
                          asp-route-id="@item.Id" class="inline">
                        <button type="submit"
                                class="text-red-600 hover:text-red-800 dark:text-red-500 dark:hover:text-red-400">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                 stroke-width="1.5" stroke="currentColor" class="inline h-5 w-5">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                      d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    </form>

                </td>

            </tr>
        }

    </tbody>
</table>

@await Html.PartialAsync("_Pagination", new
    {
        TotalCount = Model.TotalCount,
        HasPrevious = Model.HasPrevious,
        PageNumber = Model.PageNumber,
        HasNext = Model.HasNext,
        PageSize = Model.PageSize
    })